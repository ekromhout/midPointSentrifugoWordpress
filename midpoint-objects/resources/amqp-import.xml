<resource xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
          xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3"
          xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
          xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3"
          xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3"
          xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3"
          xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3"
          oid="dcf8cf6b-4986-46e8-b2e9-92ccf9f0b39e"
          version="11">
   <name>AmqpImport</name>
   <metadata>
      <modifyTimestamp>2017-09-21T14:11:57.837Z</modifyTimestamp>
      <modifierRef xmlns:tns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
                   oid="00000000-0000-0000-0000-000000000002"
                   relation="org:default"
                   type="tns:UserType"/>
      <modifyChannel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</modifyChannel>
   </metadata>
   <operationExecution id="1">
      <timestamp>2017-09-21T14:11:32.117Z</timestamp>
      <operation>
         <objectDelta>
            <t:changeType>modify</t:changeType>
            <t:objectType>c:ResourceType</t:objectType>
         </objectDelta>
         <executionResult>
            <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
            <status>success</status>
            <token>1000000000000000107</token>
         </executionResult>
         <objectName>AmqpImport</objectName>
      </operation>
      <status>success</status>
      <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                    relation="org:default"
                    type="c:UserType"/>
      <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
   </operationExecution>
   <operationExecution id="2">
      <timestamp>2017-09-21T14:11:51.716Z</timestamp>
      <operation>
         <objectDelta>
            <t:changeType>modify</t:changeType>
            <t:objectType>c:ResourceType</t:objectType>
         </objectDelta>
         <executionResult>
            <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
            <status>success</status>
            <token>1000000000000000156</token>
         </executionResult>
         <objectName>AmqpImport</objectName>
      </operation>
      <status>success</status>
      <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                    relation="org:default"
                    type="c:UserType"/>
      <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
   </operationExecution>
   <operationExecution id="3">
      <timestamp>2017-09-21T14:11:54.743Z</timestamp>
      <operation>
         <objectDelta>
            <t:changeType>modify</t:changeType>
            <t:objectType>c:ResourceType</t:objectType>
         </objectDelta>
         <executionResult>
            <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
            <status>success</status>
            <token>1000000000000000185</token>
         </executionResult>
         <objectName>AmqpImport</objectName>
      </operation>
      <status>success</status>
      <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                    relation="org:default"
                    type="c:UserType"/>
      <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
   </operationExecution>
   <operationExecution id="4">
      <timestamp>2017-09-21T14:11:57.924Z</timestamp>
      <operation>
         <objectDelta>
            <t:changeType>modify</t:changeType>
            <t:objectType>c:ResourceType</t:objectType>
         </objectDelta>
         <executionResult>
            <operation>com.evolveum.midpoint.model.impl.lens.ChangeExecutor.executeDelta</operation>
            <status>success</status>
            <token>1000000000000000214</token>
         </executionResult>
         <objectName>AmqpImport</objectName>
      </operation>
      <status>success</status>
      <initiatorRef oid="00000000-0000-0000-0000-000000000002"
                    relation="org:default"
                    type="c:UserType"/>
      <channel>http://midpoint.evolveum.com/xml/ns/public/gui/channels-3#user</channel>
   </operationExecution>
   <operationalState>
      <lastAvailabilityStatus>up</lastAvailabilityStatus>
   </operationalState>
 <connectorRef type="ConnectorType">
                        <filter>
                                <q:equal>
                                        <q:path>c:connectorType</q:path>
                                        <q:value>edu.unc.polygon.connector.amqp.AmqpConnector</q:value>
                                </q:equal>
                        </filter>
                </connectorRef>

   <connectorConfiguration xmlns:icfc="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/connector-schema-3">
      <icfc:configurationProperties xmlns:gen654="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/bundle/edu.unc.polygon.connector-amqp-import/edu.unc.polygon.connector.amqp.AmqpConnector">
         <gen654:amqpUniqueAttribute>id</gen654:amqpUniqueAttribute>
         <gen654:amqpExchangename>sor</gen654:amqpExchangename>
         <gen654:amqpRoutingkey>sor_person</gen654:amqpRoutingkey>
         <gen654:amqpScimPayloadField>payload</gen654:amqpScimPayloadField>
         <gen654:amqpPassword>5ecr3t</gen654:amqpPassword>
         <gen654:amqpHost>mq</gen654:amqpHost>
         <gen654:amqpQueuename>sor_person</gen654:amqpQueuename>
         <gen654:amqpUsername>mysql</gen654:amqpUsername>
         <gen654:amqpNameAttribute>id</gen654:amqpNameAttribute>
      </icfc:configurationProperties>
   </connectorConfiguration>
   <schema>
      <cachingMetadata>
         <retrievalTimestamp>2017-09-21T14:11:32.347Z</retrievalTimestamp>
         <serialNumber>b770289cd65cdc8b-15db7329434d7839</serialNumber>
      </cachingMetadata>
      <definition>
         <xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                     xmlns:a="http://prism.evolveum.com/xml/ns/public/annotation-3"
                     xmlns:tns="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3"
                     xmlns:ra="http://midpoint.evolveum.com/xml/ns/public/resource/annotation-3"
                     elementFormDefault="qualified"
                     targetNamespace="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3">
            <xsd:import namespace="http://prism.evolveum.com/xml/ns/public/annotation-3"/>
            <xsd:import namespace="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3"/>
            <xsd:import namespace="http://midpoint.evolveum.com/xml/ns/public/resource/annotation-3"/>
            <xsd:complexType name="MESSAGE_OBJECT_CLASS___ACCOUNT__">
               <xsd:annotation>
                  <xsd:appinfo>
                     <ra:resourceObject/>
                     <ra:identifier>icfs:name</ra:identifier>
                     <ra:displayNameAttribute>icfs:name</ra:displayNameAttribute>
                     <ra:namingAttribute>icfs:name</ra:namingAttribute>
                     <ra:nativeObjectClass>MESSAGE_OBJECT_CLASS___ACCOUNT__</ra:nativeObjectClass>
                  </xsd:appinfo>
               </xsd:annotation>
               <xsd:sequence>
                  <xsd:element minOccurs="0" name="orgId" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>120</a:displayOrder>
                           <ra:frameworkAttributeName>orgId</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="active" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>130</a:displayOrder>
                           <ra:frameworkAttributeName>active</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="lastname" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>140</a:displayOrder>
                           <ra:frameworkAttributeName>lastname</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="phone" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>150</a:displayOrder>
                           <ra:frameworkAttributeName>phone</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="firstname" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>160</a:displayOrder>
                           <ra:frameworkAttributeName>firstname</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element ref="icfs:name">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayName>id</a:displayName>
                           <a:displayOrder>110</a:displayOrder>
                           <ra:frameworkAttributeName>__NAME__</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="job" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>180</a:displayOrder>
                           <ra:frameworkAttributeName>job</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="email" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>190</a:displayOrder>
                           <ra:frameworkAttributeName>email</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" name="fullname" type="xsd:string">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayOrder>200</a:displayOrder>
                           <ra:frameworkAttributeName>fullname</ra:frameworkAttributeName>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
                  <xsd:element minOccurs="0" ref="icfs:uid">
                     <xsd:annotation>
                        <xsd:appinfo>
                           <a:displayName>ConnId UID</a:displayName>
                           <a:displayOrder>100</a:displayOrder>
                           <a:access>read</a:access>
                        </xsd:appinfo>
                     </xsd:annotation>
                  </xsd:element>
               </xsd:sequence>
            </xsd:complexType>
         </xsd:schema>
      </definition>
   </schema>
   <schemaHandling>
      <objectType>
         <kind>account</kind>
         <intent>default</intent>
         <default>true</default>
         <objectClass>ri:MESSAGE_OBJECT_CLASS___ACCOUNT__</objectClass>
         <attribute>
            <c:ref>icfs:name</c:ref>
            <displayName>Employee ID</displayName>
            <inbound>
               <target>
                  <c:path>$user/name</c:path>
               </target>
            </inbound>
         </attribute>
         <attribute>
            <c:ref>ri:fullname</c:ref>
            <inbound>
               <target>
                  <c:path>$user/fullName</c:path>
               </target>
            </inbound>
         </attribute>
         <attribute>
            <c:ref>ri:firstname</c:ref>
            <inbound>
               <target>
                  <c:path>$user/givenName</c:path>
               </target>
            </inbound>
         </attribute>
         <attribute>
            <c:ref>ri:lastname</c:ref>
            <inbound>
               <target>
                  <c:path>$user/familyName</c:path>
               </target>
            </inbound>
         </attribute>
         <attribute>
            <c:ref>ri:orgId</c:ref>
            <inbound>
               <target>
                  <c:path>$user/organizationalUnit</c:path>
               </target>
            </inbound>
         </attribute>
         <attribute>
            <c:ref>ri:job</c:ref>
            <inbound>
               <target>
                  <c:path>$user/title</c:path>
               </target>
            </inbound>
         </attribute>
         <attribute>
            <c:ref>ri:phone</c:ref>
            <inbound>
               <target>
                  <c:path>$user/telephoneNumber</c:path>
               </target>
            </inbound>
         </attribute>
         <attribute>
            <c:ref>ri:email</c:ref>
            <inbound>
               <target>
                  <c:path>$user/emailAddress</c:path>
               </target>
            </inbound>
         </attribute>
         <activation>
            <administrativeStatus>
               <inbound>
                  <strength>weak</strength>
               </inbound>
            </administrativeStatus>
         </activation>
         <credentials>
            <password>
               <inbound>
                  <strength>weak</strength>
                  <expression>
                     <generate xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                               xsi:type="c:GenerateExpressionEvaluatorType"/>
                  </expression>
               </inbound>
            </password>
         </credentials>
      </objectType>
   </schemaHandling>
   <capabilities>
      <cachingMetadata>
         <retrievalTimestamp>2017-09-21T14:11:32.345Z</retrievalTimestamp>
         <serialNumber>a0989f9bf0bb5d59-12605cef28272abc</serialNumber>
      </cachingMetadata>
      <native xmlns:cap="http://midpoint.evolveum.com/xml/ns/public/resource/capabilities-3"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:type="c:CapabilityCollectionType">
         <cap:schema/>
         <cap:testConnection/>
         <cap:read/>
         <cap:delete/>
         <cap:script>
            <cap:host>
               <cap:type>connector</cap:type>
            </cap:host>
         </cap:script>
         <cap:addRemoveAttributeValues/>
      </native>
      <configured xmlns:cap="http://midpoint.evolveum.com/xml/ns/public/resource/capabilities-3"
                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                  xsi:type="c:CapabilityCollectionType">
         <cap:testConnection>
            <cap:enabled>true</cap:enabled>
         </cap:testConnection>
         <cap:read>
            <cap:enabled>true</cap:enabled>
         </cap:read>
         <cap:delete>
            <cap:enabled>true</cap:enabled>
         </cap:delete>
         <cap:script>
            <cap:enabled>true</cap:enabled>
            <cap:host>
               <cap:type>connector</cap:type>
            </cap:host>
         </cap:script>
         <cap:addRemoveAttributeValues>
            <cap:enabled>true</cap:enabled>
         </cap:addRemoveAttributeValues>
      </configured>
   </capabilities>
   <projection>
      <assignmentPolicyEnforcement>full</assignmentPolicyEnforcement>
   </projection>
   <synchronization>
      <objectSynchronization>
         <enabled>true</enabled>
         <correlation>
            <q:equal>
               <q:path>c:name</q:path>
               <expression>
                  <path>$account/attributes/id</path>
               </expression>
            </q:equal>
         </correlation>
         <reaction>
            <situation>linked</situation>
            <synchronize>true</synchronize>
         </reaction>
         <reaction>
            <situation>deleted</situation>
            <synchronize>true</synchronize>
            <action>
               <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#deleteFocus</handlerUri>
            </action>
         </reaction>
         <reaction>
            <situation>unlinked</situation>
            <synchronize>true</synchronize>
            <action>
               <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#link</handlerUri>
            </action>
         </reaction>
         <reaction>
            <situation>unmatched</situation>
            <synchronize>true</synchronize>
            <action>
               <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#addFocus</handlerUri>
            </action>
         </reaction>
      </objectSynchronization>
   </synchronization>
</resource>
